import os
import signal
import subprocess
import sys
import time
from multiprocessing import Process


def main():
    print(f"[Parent] PID: {os.getpid()}")

    # Start a child process that just sleeps
    proc = subprocess.Popen(
        [
            # my subprocess
        ]
    )

    time.sleep(1)  # let child start

    print(f"[Parent] Child PID: {proc.pid}")
    print("[Parent] Sending SIGTERM to child...")

    # Both of these are equivalent on Unix:
    proc.terminate()  # <-- problem occurs here in debugger
    # proc.send_signal(signal.SIGTERM)

    print("[Parent] Waiting for child to exit...")
    proc.wait()

    print(
        "[Parent] Child exited. Parent continues normally."
    )  # â† This line is NOT reached in debugger!


if __name__ == "__main__":
    p = Process(target=main)
    p.start()
    p.join()