import gpxpy
import matplotlib.pyplot as plt

with open("kedarkantha.gpx", "r") as f:
    gpx = gpxpy.parse(f)

elevations = []
distances = []

for track in gpx.tracks:
    for segment in track.segments:
        prev_point = None
        total_distance = 0
        for point in segment.points:
            if prev_point:
                total_distance += point.distance_3d(prev_point)
            elevations.append(point.elevation)
            distances.append(total_distance)
            prev_point = point

plt.plot(distances, elevations)
plt.xlabel("Distance (m)")
plt.ylabel("Elevation (m)")
plt.title("Kedarkantha Trek Elevation Profile")
plt.show()