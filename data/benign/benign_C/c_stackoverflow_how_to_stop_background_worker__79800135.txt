BackgroundWorker worker;
/* set up common data for worker */
memset(&worker, 0, sizeof(worker));
snprintf(worker.bgw_name, BGW_MAXLEN, "Health Daemon");
sprintf(worker.bgw_function_name, "HealthDaemon");
sprintf(worker.bgw_library_name, "health");
worker.bgw_flags = BGWORKER_SHMEM_ACCESS |
    BGWORKER_BACKEND_DATABASE_CONNECTION;
worker.bgw_start_time = bgWorkerStart_ConsistentState ;
worker.bgw_restart_time = BGW_NEVER_RESTART;
worker.bgw_notify_pid = 0;
worker.bgw_type[0] = 0;
RegisterBackgroundWorker(&worker);